<!DOCTYPE html>
<html>
  <head>
    <link href="./bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="./select2/select2.css" rel="stylesheet">
    <link href="./css/config.css" rel="stylesheet">
  </head>
  <body>
    <!-- if this has been filled in before, remove next class and "configured"-->
    <div class="nav-steps">
      <a class="step_container next completed" href="submittedFiles.html"><span class="badge badge-success">1</span> Submitted Files</a>
      <a class="step_container next completed" href="suppliedFiles.html"><span class="badge badge-success">2</span> Supplied Files</a>
      <a class="step_container next completed" href="compilerOptions.html"><span class="badge badge-success">3</span> Compiler Options</a>
      <a class="step_container next active" href="test.html"><span class="badge badge-info">4</span> Tests</a>
      <span class="step_container"><span class="badge">5</span> Sharing</span>
    </div>

    <div class="step-container">
      <form class="form-horizontal" action="sharing.html">
        <legend>
          Tests
        </legend>

        <div class="control-group">
          <label class="control-label" for="tests">Tests to Run:</label>
          <div class="controls" id="testsContainer">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>
                    Name
                  </th>
                  <th>
                    Program
                  </th>
                  <th>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>fooTest</td>
                  <td>foo</td>
                  <td>
                    <a href="#"><i class="icon-edit"></i></a>
                    <a href="#"><i class="icon-trash"></i></a>
                  </td>
                </tr>
              </tbody>
            </table>

            <a href="#" id="addTestButton" class="btn btn-success"><i class="icon-plus icon-white"></i> Add Test</a>
          </div>
        </div>

        <hr/>

        <div class="control-group">
          <label class="control-label" for="successCondition">Completion Condition:</label>
          <div class="controls" id="successContainer">
            <input type="text" id="successCondition" name="successCondition" placeholder="Condition for Completion">
          </div>
        </div>
        <div class="form-actions">
          <!-- if it's been filled in before, make this say "Save" -->
          <button type="submit" class="btn btn-primary pull-right">Next &rarr;</button>
        </div>
      </form>
    </div>


    <div class="modal hide fade" id="testModal">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Test</h3>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="control-group">
            <label class="control-label" for="testName">Test Name:</label>
            <div class="controls">
              <input type="text" name="testName" placeholder="Name">
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="testName">Program to Run:</label>
            <div class="controls">
              <input id="testPrograms" type="text" name="testPrograms" placeholder="Program Name">
            </div>
          </div>

          <hr>

          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-input" data-toggle="tab">Provided Input</a></li>
            <li><a href="#tab-output" data-toggle="tab">Expected Output</a></li>
            <li><a href="#tab-comparison" data-toggle="tab">Comparison Options</a></li>
            <li><a href="#tab-feedback" data-toggle="tab">Feedback</a></li>
          </ul>

          <div class="tab-content">
            <div class="tab-pane active" id="tab-input">
              <div class="control-group">
                <label class="control-label" for="testArgs">Commandline Args:</label>
                <div class="controls">
                  <input type="text" name="testArgs" id="testArgs">
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="testStdin">Provided STDIN:</label>
                <div class="controls">
                  <textarea name="testStdin" class="testInputArea"></textarea>
                </div>
              </div>
            </div>
            
            <div class="tab-pane" id="tab-output">
              <div class="control-group">
                <label class="control-label" for="testStdout">Expected STDOUT:</label>
                <div class="controls">
                  <textarea name="testStdout" class="testInputArea"></textarea>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="testExitCode">Expected Exit Code:</label>
                <div class="controls">
                  <input type="text" class="input-small" name="testExitCode" id="testExitCode">
                </div>
              </div>
            </div>

            <div class="tab-pane" id="tab-comparison">
              <div class="control-group">
                <label class="control-label" for="testCompare">Comparison Options:</label>
                <div class="controls">
                  <label class="checkbox">
                    <input type="checkbox" name="testIgnoreStdout">
                    Ignore stdout entirely (anything goes)
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" name="testIgnoreWhitespace">
                    Ignore white space entirely
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" name="testTrimWhitespace">
                    Trim white space from each line
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" name="testCaseInsensitive">
                    Case insensitive
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" name="testIgnoreTrailing">
                    Ignore trailing output
                  </label>
                  <label class="checkbox">
                    <input type="checkbox" name="testIgnoreExitCode">
                    Ignore exit code
                  </label>
                </div>
              </div>
            </div>

            <div class="tab-pane" id="tab-feedback">
              <div class="control-group">
                <label class="control-label" for="testFeedbackSuccess">Successful Feedback:</label>
                <div class="controls">
                  <textarea name="testFeedbackSuccess" class="testInputArea"></textarea>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="testFeedbackFail">Unsuccessful Feedback:</label>
                <div class="controls">
                  <textarea name="testFeedbackFail" class="testInputArea"></textarea>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <a href="#" class="btn btn-success">Save</a>
      </div>
    </div>

    <script type="text/javascript" src="./jquery.js"></script>
    <script type="text/javascript" src="./bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./formToJSON.js"></script>
    <script type="text/javascript" src="./select2/select2.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {        
        $('#addTestButton').click(function(){
          $('#testModal').modal('show');
        });

        $('#testPrograms').select2({
          minimumInputLength: 1,
          tokenSeparators: [",", " "],
          tags: ["program1"],
          width: 'element'
        });

        $('#successCondition').select2({
          minimumInputLength: 1,
          tokenSeparators: [",", " "],
          tags: ['and', '&&', 'or', '||', '(', ')', 'not', '!', 'test1'],
          width: 'element'
        });
      });
    </script>
  </body>
</html>